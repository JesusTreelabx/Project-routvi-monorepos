version: 0.2
phases:
  install:
    runtime-versions:
      nodejs: 18
    commands:
      - npm install
  build:
    commands:
      - |
        for app in admin client partner web; do
          cd apps/$app && npm install && npx vite build --base=/$app/ && cd ../..
        done
  post_build:
    commands:
      - |
        for app in admin client partner web; do
          aws s3 sync apps/$app/dist s3://project-r-monorepos-bucket/$app --delete
        done
artifacts:
  files: [] # ESTO EVITA LA DUPLICIDAD DE CARPETAS